<section id="search">
    <div id="search_content" data-pop-me-up="!isAdvanced()" data-ng-class="{advanced: isAdvanced()}" data-scroll-top-when="isAdvanced()" >
	<!-- Without this div we get bad sizing issues -->
	<div>
	    <span class="advanced-toggle">
		<a data-ng-click="toggleAdvanced()">
		    <ng-switch on="isAdvanced()">
			<span ng-switch-when="false">Advanced</span>
			<span ng-switch-when="true">Basic</span>
		    </ng-switch>
		</a>
	    </span>
	    <form id="search-form" data-ng-submit="refresh()">
		<div class="searchform" data-ng-show="!isAdvanced()">
		    <input class="searchfield" type="search" data-ng-model="query" autofocus="autofocus" placeholder="Search…" data-ng-change="change()">
		    <input class="searchbutton" type="submit" value="Go" />
		</div>
		<fieldset id="search-advanced" data-ng-show="isAdvanced()" form="search-form">
		    <legend>Advanced Search</legend>
		    <ul>
			<li>
			    <label for="search-form-title">Title</label>
			    <input type="text" id="search-form-title" name="title" data-ng-model="advanced.title">
			</li>
			<li>
			    <label for="search-form-description">Description</label>
			    <input type="text" id="search-form-description" name="title" data-ng-model="advanced.description">
			</li>
			<li>
			    <label for="search-form-date">Creation Date</label>
			    <input type="date" id="search-form-date" name="date" data-ng-model="advanced.date">
			</li>
			<!--<li>
			    <label for="search-form-director">Director</label>
			    <input type="text" id="search-form-director" name="director" data-ng-model="advanced.director">
			</li>-->
		    </ul>
		    <input type="submit" data-disable-when="!canSearch()" value="Go">
		</fieldset>
		<p data-ng-show="!isSearching && hasSearched">
		    <ng-pluralize count="results.length" when="{'0': 'No results.',
				  'one': 'One result.',
				  'other': '{} results found.'}">
		    </ng-pluralize>
		</p>
		<p data-ng-show="isSearching">
		    Searching…
		</p>
	    </form>
	</div>
    </div>
    <section id="search-results">
	<ul>
	    <li class="result" data-ng-repeat="result in results"><a data-ng-href="#/{{result.type}}/{{result.identifier}}">
		    <div class="details">
			<ng-switch on="result.date.length == 10">
				<time datetime="{{result.date}}" data-ng-switch-when="true">{{result.date | date:'longDate'}}</time>
				<time datetime="{{result.date}}" data-ng-switch-when="false">{{result.date}}</time>
			</ng-switch>
			<ul class="languages">
			    <li data-ng-model="date" data-ng-repeat="lg in result.language">{{lg | language}}</li>
			</ul>
		    </div>
		    <h1>{{result.title}}</h1>
		    <p class="description">{{result.description}}</p>
	    </a></li>
	</ul>
    </section>
</section>