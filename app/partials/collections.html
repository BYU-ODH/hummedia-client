<div id="collections_content">
    <div ng-show=collections.length id="tabs-holder">
        <div ng-show="showTabs" id="select-view-buttons">
            <button ng-class="{active: all}" ng-click="loadCollectionList(true)">All</button>
            <button ng-class="{active: !all}" ng-click="loadCollectionList(false)">Mine</button>
        </div>
        <ul id="tabs" data-ng-show="collections.length || showTabs">
            <li data-ng-repeat="tabcollection in collections | orderColon:'dc:title'" data-ng-class="{highlighted: collection.pid==tabcollection.pid}" data-ng-click="showVideos(tabcollection.pid)">
                <a ng-show='canEdit(tabcollection)' class='edit-button' ng-href="/admin/collection?id={{tabcollection.pid}}"><i data-tooltip="Edit this collection" class="icon-edit"></i></a>
                <a ng-href="/collection?id={{tabcollection['pid']}}" id="tab-{{tabcollection['pid']}}">{{tabcollection['dc:title']}}</a>
            </li>
        </ul>
    </div>
<div id="collections_wrapper">
    <div ng-show=!ready>
      <i class='icon-cog icon-spin'></i>
    </div>
    <div ng-show=ready>
      <h2 ng-show=!collections.length>There are no collections to display.</h2>
      <p ng-show='!collections.length && loggedIn'>
        We could not find any videos assigned to you. Please contact your instructor to determine if the assigned videos have been linked to the current semester's classes. 
      </p>
    </div>
<div ng-show=collections.length class='collection_blocks'>
    <div class='collection_toggle'>
        <div>
            <h2>{{collection['dc:title']}}</h2>
            <p data-ng-bind-html="collection['dc:description']"></p>
                        
            <div class="filter" data-ng-show="!collection.isLoading">
                {{"Search:" | tr}} <input type="search" ng-model="video_filter">
            </div>         
            
            <i class='icon-cog icon-spin' data-ng-show="collection.isLoading" title="Loading videos"></i>
            
            <hr>
        
        </div>
        <a title="{{video['ma:description']}}" href="/video/{{video.pid}}?collection={{collection.pid}}" data-ng-repeat="video in collection['videos'] | filter: video_filter | orderColon:'ma:title'" class="video_blocks plain_link">
            <!-- audio files -->
            <svg viewBox="0 0 300 200" width=300 height=200 ng-if='video["type"]=="humaudio"' xmlns="http://www.w3.org/2000/svg" version="1.1">
                <path
                   style="fill:none;stroke:none"
                   d="m 23.99,43.29 c 34.75,-5.93 69.94,-9.37 105.19,-10.28 47.89,-1.23 95.91,2.21 143.13,10.28"
                   id="path3213"
                   />
                <text
                   xml:space="preserve"
                   transform="translate(1.47,18.87)"><textPath
                     xlink:href="#path3213"
                     class="cassette-text">{{video['ma:title']}}</textPath></text>
            </svg>
            <img ng-if='video["type"]=="humaudio"' class='cassette' src="/img/cassette.svg">

            <!-- video files -->
            <img ng-if='video["type"]!="humaudio"' data-ng-src="{{video['ma:image'][0]['thumb'] || 'img/vhs.svg'}}" scroll-load="{{video['ma:image'][0]['poster']}}" onerror="this.src='img/vhs.svg'"/>

            <!-- both audio and video -->
            <cite href="/video/{{video.pid}}?collection={{collection.pid}}">{{video['ma:title']}}</cite>
            <small>{{video['ma:date']}} [{{video['ma:hasLanguage'][0] | language}}]</small>
        </a>
    </div>
</div> 
</div>
</div>
